<h2>Instalación del servidor web apache. Usaremos dos dominios mediante el archivo hosts: centro.intranet y departamentos.centro.intranet (myapp). El primero servirá el contenido mediante wordpress y el segundo una aplicación en python.</h2>
Primero necesitaremos realizar varias configuraciones:
Instalamos apache:

```sudo apt update```

```sudo apt install apache2```

Para crear los dominios, primero, haremos ‘sudo nano /etc/hosts’, una vez dentro, añadiremos el dominio “centro.intranet” y "departamentos.centro.intranet” con la ip de nuestro equipo:

![1](IMAGENES/1.png)

Crear nuestro fichero virtualhost:
Abrimos la terminal y creamos el fichero en el directorio con:

```sudo nano /etc/apache2/sites-available/centro.intranet.conf```

Dentro aparecerá:

![2](IMAGENES/2.png)

Activamos el host:

```sudo a2ensite centro.intranet```

Ahora comprobamos que nuestro sitio está activado:

```ls /etc/apache2/sites-enabled/```

![3](IMAGENES/3.png)


Agregamos la IP local y el nuevo dominio en el fichero HOST:

```sudo nano /etc/hosts```

añadimos la línea: '192.168.1.1 centro.intranet'

Recargamos Apache2: 

```sudo service apache2 reload```

Hacemos lo mismo con departamentos.centro.intranet.

*YA TENDRÍAMOS LOS DOS DOMINIOS CREADOS*.

<h3>WORDPRESS: centro.intranet</h3>
EL PRIMER DOMINIO ‘CENTRO.INTRANET’ LO SERVIREMOS EN WORDPRESS, que he previamente instalado, cuya explicación se encuentra en el [Ejercicio 3](EJERCICIOS/3.md)

![4](IMAGENES/4.png)

LE DAMOS A INSTALAR:

![5](IMAGENES/5.png)

Accedemos:

ASÍ SE VERÍA AL INICIAR SESIÓN EN CENTRO.INTRANET:

![6](IMAGENES/6.png)

![7](IMAGENES/7.png)

<h3>PYTHON: departamentos.centro.intranet</h3>
EL SEGUNDO DOMINIO ‘DEPARTAMENTOS.CENTRO.INTRANET’ LO SERVIREMOS EN UNA APP PYTHON:

Primero, instalamos Python con:

```sudo apt install software-properties-common -y```

```sudo add-apt-repository ppa:deadsnakes/ppa -y```

```sudo apt update```

```sudo apt install python3.9 -y```

Hecho esto, para configurar Virtual Host en Apache para ejecutar aplicaciones Python haremos lo siguiente:

Creamos un fichero, ‘departamentos.centro.intranet’ dentro del directorio /etc/apache2/sites-available/ y agregamos la configuración básica que se muestra a continuación a ‘departamentos.centro.intranet’:

```
<VirtualHost *:80>
    	DocumentRoot /var/www/departamentos.centro.intranet
        	WSGIDaemonProcess departamentos.centro.intranet user=www-data group=www-data processes=1 threads=5 python-path= /var/www/departamentos.centro.intranet
        WSGIScriptAlias / /var/www/departamentos.centro.intranet /departamentos.centro.intranet/wsgi.py
        <Directory /var/www/departamentos.centro.intranet >
                WSGIProcessGroup departamentos.centro.intranet  
                WSGIApplicationGroup %{GLOBAL}
                Require all granted
        </Directory>
        ErrorLog \${APACHE_LOG_DIR}/djangoapp-error.log
        CustomLog \${APACHE_LOG_DIR}/djangoapp-access.log combined
</VirtualHost>
```

Lo siguiente sería habilitar el sitio virtual recién creado con:

```sudo a2ensite departamentos.centro.intranet```

Deshabilitamos el sitio virtual que viene por omisión en Apache:

```sudo a2dissite 000-default.conf```

Reiniciamos apache2:

```sudo service apache2 restart```

Para crear un entorno virtual en Python 3 ejecutaremos la siguiente orden en un emulador de terminal:

```python3 -m venv departamentos.centro.intranet```

Para comenzar a trabajar en nuestro entorno virtual en Python 3, tenemos que ejecutar la siguiente orden:

```source departamentos.centro.intranet/bin/activate```

![8](IMAGENES/8.png)

Instalamos mod_wsgi en Apache, lo haremos instalando el paquete libapache2-mod-wsgi:

```sudo apt-get install libapache2-mod-wsgi```

Luego crearemos la estructura de directorios para nuestra aplicación:

Debemos tener un directorio destinado a montar toda la aplicación, el que creé antes 'departamentos.centro.intranet'.

Dentro de este directorio, vamos a dividir su arquitectura en dos partes:

Destinada al almacenaje de nuestra aplicación Python pura (será un directorio privado, no servido):

```mkdir /etc/apache2/sites-available/departamentos.centro.intranet/mypythonapp```

Destinada a servir la aplicación (directorio público servido) en el cuál solo almacenaremos archivos estáticos:

```mkdir /etc/apache2/sites-available/departamentos.centro.intranet/public_html```

![image](https://user-images.githubusercontent.com/92718546/204747043-846b2118-9276-4c5a-bb1a-626d7d8620ac.png)


